version: '3.8'

services:
  importador-omie:
    image: ghcr.io/luishcuba/import:latest
    container_name: importador-omie
    restart: unless-stopped
    
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.importador.rule=Host(`import.lhcx.tech`)"
      - "traefik.http.routers.importador.entrypoints=websecure"
      - "traefik.http.routers.importador.tls=true"
      - "traefik.http.routers.importador.tls.certresolver=leresolver"
      - "traefik.http.services.importador.loadbalancer.server.port=5000"
    
    volumes:
      - importador_uploads:/app/uploads
      - importador_relatorios:/app/relatorios
      - importador_config:/app
    
    environment:
      # Usu√°rio configura via interface web em: import.lhcx.tech/configuracoes
      - VINDI_TOKEN_LOBO_ATIVIDADES=
      - OMIE_APP_KEY=
      - OMIE_APP_SECRET=
      - CONTA_VINDI_ID=
      - EMPRESA=LOBO_ATIVIDADES
    
    networks:
      - import

volumes:
  importador_uploads:
  importador_relatorios:
  importador_config:

networks:
  import:
    external: true

